!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.XScroll=e()}(this,function(){"use strict";function t(t,e,n,i){return-n*(t/=i)*(t-2)+e}var e=function(t){return"string"==typeof t?document.getElementById(t):t},n=function(t,e){for(var n in e)t[n]=e[n];return t},i=function(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,2))}},o=function(){return window.addEventListener?function(t,e,n){n.addEventListener(t,e,!1)}:function(t,e,n){n.attachEvent("on"+t,e)}}(),s=function(t,e,n){for(var i=0,o=t.length;o>i;i++)-1!=t[i].className.indexOf(n)&&(t[i].className=t[i].className.replace(n,""));t[e].className=t[e].className.replace(/\s$/g,"")+" "+n},r=function(){return-[1]?function(t,e){t.style.opacity=.01*e}:function(t,e){t.style.filter="alpha(opacity="+e+")"}}(),u=function(t,e){for(var n in e)t.style[n]=e[n]},a=function(t,e){return new a.main(t,e)};return a.main=function(i,o){var s=this;s.wraper=e(i),s.items=s.wraper.children,s.count=s.items.length,this.defaults={how:0,direct:0,auto:4e3,fps:50,ing:500,pause:!0,event:"mouseover",Tween:t},n(this.defaults,o),s.how=s.defaults.how,s.auto=s.defaults.auto,s.speed=1e3/s.defaults.fps,s.ing=s.defaults.ing/s.speed,s.tween=s.defaults.Tween,s.auto=s.defaults.auto,s.pager=s.defaults.pager,s.event=s.defaults.event,s.pause=s.defaults.pause,s.next=s.now=s.time=0,s._time=0,s.init()},a.prototype={init:function(){for(var t=this,n=t.count,t=t,s=t.items;n-- >0;)s[n].style.cssText="position:absolute; display:none; z-index:5;top:0;left:0;";u(s[0],{zIndex:10,display:"block"});var r=t.defaults.direct;if(t.direct=["left","top"][r%2],t.fan=r>1?-1:1,t.step=t.defaults.step||(r%2?t.wraper.offsetHeight:t.wraper.offsetWidth),t.step*=t.fan,t.pause&&(o("mouseout",function(){t.Cont()},t.wraper),o("mouseover",function(){t.Pause()},t.wraper)),t.pager){t.pages=e(t.pager).children;for(var a,f=t.event,c=t.pages.length,t=t;c--;)!function(e){o(f,function(){t.Pause(),a=setTimeout(function(){t.go(e)},150)},t.pages[e]),o("mouseout",function(){clearTimeout(a),t.defaults.auto&&(t.auto=!0)},t.pages[e])}(c)}t.Run=t.run(),t.auto&&(t.timer=setTimeout(i(t,t.Next),t.auto))},fix:function(){for(var t=this.count;t--;)t==this.now||t==this.next?this.items[t].style.display="block":this.items[t].style.display="none"},go:function(t){var e=this;void 0!=t?e.next=t:e.next=e.now+1,e.next>=e.count&&(e.next=0)||e.next<0&&(e.next=e.count-1),e.next!=e.now&&(clearTimeout(e.timer),e.moving&&e.after(),e.curS=e.items[e.now],e.nextS=e.items[e.next],e.fix(),e.moving=1,u(e.curS,{zIndex:5}),u(e.nextS,{zIndex:10}),e.Run(),e.pager&&s(e.pages,e.next,"on"),e.now=e.next)},run:function(t,e){function n(t){for(var e=t.length;e--;){var n=t[e];n.b=parseInt(n.style[i.direct],10),n.c=n.e-n.b}}var i=this,o=i.step,s=i.tween;clearTimeout(i.timer);var u=[function(){i.nextS.f=0,i.nextS._f=100/i.ing,i.curS.f=100,i.curS._f=-(100/i.ing),i.Timer([i.curS,i.nextS])},function(){i.curS.e=-o,i.nextS.style[i.direct]=o+"px",i.nextS.e=0,n([i.curS,i.nextS]),i.Timer([i.curS,i.nextS])},function(){i.nextS.style[i.direct]=o+"px",i.nextS.e=0,i.nextS.f=0,i.nextS._f=100/i.ing,n([i.nextS]),i.Timer([i.nextS])},function(){i.curS.style.zIndex=10,i.nextS.style.zIndex=5,r(i.nextS,100),i.curS.e=-o,n([i.curS]),i.Timer([i.curS])},function(){var t=i.curS,e=i.nextS;t.style.zIndex=10,e.style.zIndex=5,t.e=-o/2,e.e=o/2;var n=0,r=t.e-0,u=2*i.ing,a=i.direct,f=i.speed,c=1;!function l(){clearTimeout(i.timer),c?u>n&&Math.floor(t.e-parseInt(t.style[a],10))?(t.style[a]=Math.floor(s(n++,0,r,u))+"px",e.style[a]=Math.floor(s(n++,0,-r,u))+"px",i.timer=setTimeout(l,f)):(c=0,n=0,t.style.zIndex=5,e.style.zIndex=10,i.timer=setTimeout(l,f)):u>n&&Math.floor(0-parseInt(e.style[a],10))?(t.style[a]=Math.floor(s(n++,t.e,-r,u))+"px",e.style[a]=Math.floor(s(n++,e.e,r,u))+"px",i.timer=setTimeout(l,f)):(c=1,n=0,e.style[a]=0,t.style[a]=0,i.after())}()}];+new Date;return u[i.how]},after:function(){var t=this;t.moving=t._time=0,u(t.curS,{display:"none",zIndex:5}),t.nextS.style[t.direct]=0,r(t.nextS,100),r(t.curS,100),t.Cont()},End:function(){this._time=0,this.moving=0,u(this.nextS,{zIndex:10,display:"block"}),r(this.nextS,100),this.nextS.style[this.direct]=0},Timer:function(t){var e=this;clearTimeout(e.timer),e._time++<e.ing?(e.Moving(t),e.timer=setTimeout(i(e,e.Timer,t),e.speed)):(e._time=0,e.moving=0,clearTimeout(e.timer),e.after())},Moving:function(t){for(var e=t.length;e--;){var n=t[e];n.c&&(n.style[this.direct]=Math.floor(this.tween(this._time,n.b,n.c,this.ing))+"px"),void 0!=n.f&&r(n,n.f+=n._f)}},Prev:function(){this.go(--this.next)},Next:function(){this.go(++this.next)},Pause:function(){this.auto=!1,this.moving||clearTimeout(this.timer)},Cont:function(){this.auto=this.defaults.auto,!this.moving&&this.auto&&(this.timer=setTimeout(i(this,this.Next),this.auto))}},a.main.prototype=a.prototype,a});